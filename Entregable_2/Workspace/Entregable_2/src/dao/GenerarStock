import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Random;

public class GenerarStock {

    public static void generarCantidades(Connection connection) {
        Random random = new Random();

        try {
            // Obtener la lista de criptos
            String query = "SELECT nomenclatura FROM activos";
            try (PreparedStatement statementCriptos = connection.prepareStatement(query);
                 ResultSet resultSetCriptos = statementCriptos.executeQuery()) {

                while (resultSetCriptos.next()) {
                    String cripto = resultSetCriptos.getString("nomenclatura");

                    // Generar una cantidad aleatoria para la criptomoneda (entre 0 y 500)
                    double cantidadAleatoria = 500 * random.nextDouble();

                    // Actualizar el stock del activo en la tabla activos_usuarios
                    actualizarStock(connection, cripto, cantidadAleatoria);
                }
            }

            System.out.println("Stock generado y actualizado para los activos.");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    private static void actualizarStock(Connection connection, String cripto, double cantidad) throws SQLException {
        String queryActualizar = "UPDATE activos SET stock = ? WHERE nomenclatura = ?";
        try (PreparedStatement statementActualizar = connection.prepareStatement(queryActualizar)) {
            statementActualizar.setDouble(1, cantidad);
            statementActualizar.setString(2, cripto);
            statementActualizar.executeUpdate();
        }
    }
}
